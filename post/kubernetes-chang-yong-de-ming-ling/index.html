<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>kubernetes  常用的命令 | 吴超武个人博客</title>
<meta name="description" content="业精于勤荒于嬉，行成于思毁于随" />
<link rel="shortcut icon" href="https://www.luoboyu.com/favicon.ico?v=1569758402234">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://www.luoboyu.com/styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://www.luoboyu.com">
  <img class="avatar" src="https://www.luoboyu.com/images/avatar.png?v=1569758402234" alt="">
  </a>
  <h1 class="site-title">
    吴超武个人博客
  </h1>
  <p class="site-description">
    业精于勤荒于嬉，行成于思毁于随
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              kubernetes  常用的命令
            </h2>
            <div class="post-info">
              <span>
                2018-11-30
              </span>
              <span>
                12 min read
              </span>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <p>kubectl是Kubernetes集群的命令行工具，通过kubectl能够对集群本身进行管理，并能够在集群上进行容器化应用的安装部署<br>
kubelet：负责pod对应的容器创建、启停等任务，同时与master 节点密切协作，实现集群管理的基本功能<br>
kube-proxy:实现kubernetes Service 的通信与负载均衡机制的重要组件</p>
<!-- more -->
<h2 id="11-common-commands">1.1 Common Commands</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>Run curl test temporarily</td>
<td><code>kubectl run --rm mytest --image=yauritux/busybox-curl -it</code></td>
</tr>
<tr>
<td>Run wget test temporarily</td>
<td><code>kubectl run --rm mytest --image=busybox -it</code></td>
</tr>
<tr>
<td>Run nginx deployment with 2 replicas</td>
<td><code>kubectl run my-nginx --image=nginx --replicas=2 --port=80</code></td>
</tr>
<tr>
<td>Run nginx pod and expose it</td>
<td><code>kubectl run my-nginx --restart=Never --image=nginx --port=80 --expose</code></td>
</tr>
<tr>
<td>Run nginx deployment and expose it</td>
<td><code>kubectl run my-nginx --image=nginx --port=80 --expose</code></td>
</tr>
<tr>
<td>Set namespace preference</td>
<td><code>kubectl config set-context &lt;context_name&gt; --namespace=&lt;ns_name&gt;</code></td>
</tr>
<tr>
<td>List pods with nodes info</td>
<td><code>kubectl get pod -o wide</code></td>
</tr>
<tr>
<td>List everything</td>
<td><code>kubectl get all --all-namespaces</code></td>
</tr>
<tr>
<td>Get all services</td>
<td><code>kubectl get service --all-namespaces</code></td>
</tr>
<tr>
<td>Get all deployments</td>
<td><code>kubectl get deployments --all-namespaces</code></td>
</tr>
<tr>
<td>Show nodes with labels</td>
<td><code>kubectl get nodes --show-labels</code></td>
</tr>
<tr>
<td>Get resources with json output</td>
<td><code>kubectl get pods --all-namespaces -o json</code></td>
</tr>
<tr>
<td>Validate yaml file with dry run</td>
<td><code>kubectl create --dry-run --validate -f pod-dummy.yaml</code></td>
</tr>
<tr>
<td>Start a temporary pod for testing</td>
<td><code>kubectl run --rm -i -t --image=alpine test-$RANDOM -- sh</code></td>
</tr>
<tr>
<td>kubectl run shell command</td>
<td><code>kubectl exec -it mytest -- ls -l /etc/hosts</code></td>
</tr>
<tr>
<td>Get system conf via configmap</td>
<td><code>kubectl -n kube-system get cm kubeadm-config -o yaml</code></td>
</tr>
<tr>
<td>Get deployment yaml</td>
<td><code>kubectl -n denny-websites get deployment mysql -o yaml</code></td>
</tr>
<tr>
<td>Explain resource</td>
<td><code>kubectl explain pods</code>, <code>kubectl explain svc</code></td>
</tr>
<tr>
<td>Watch pods</td>
<td><code>kubectl get pods -n wordpress --watch</code></td>
</tr>
<tr>
<td>Query healthcheck endpoint</td>
<td><code>curl -L http://127.0.0.1:10250/healthz</code></td>
</tr>
<tr>
<td>Open a bash terminal in a pod</td>
<td><code>kubectl exec -it storage sh</code></td>
</tr>
<tr>
<td>Check pod environment variables</td>
<td><code>kubectl exec redis-master-ft9ex env</code></td>
</tr>
<tr>
<td>Enable kubectl shell autocompletion</td>
<td><code>echo &quot;source &lt;(kubectl completion bash)&quot; &gt;&gt;~/.bashrc</code>, and reload</td>
</tr>
<tr>
<td>Use minikube dockerd in your laptop</td>
<td><code>eval $(minikube docker-env)</code>, No need to push docker hub any more</td>
</tr>
<tr>
<td>Kubectl apply a folder of yaml files</td>
<td><code>kubectl apply -R -f .</code></td>
</tr>
<tr>
<td>Get services sorted by name</td>
<td>kubectl get services –sort-by=.metadata.name</td>
</tr>
<tr>
<td>Get pods sorted by restart count</td>
<td>kubectl get pods –sort-by=’.status.containerStatuses[0].restartCount’</td>
</tr>
<tr>
<td>List pods and images</td>
<td>kubectl get pods -o=’custom-columns=PODS:.metadata.name,Images:.spec.containers[*].image’</td>
</tr>
<tr>
<td>List all container images</td>
<td><a href="https://github.com/dennyzhang/cheatsheet-kubernetes-A4/blob/master/list-all-images.sh#L14-L17">list-all-images.sh</a></td>
</tr>
<tr>
<td>kubeconfig skip tls verification</td>
<td><a href="https://github.com/dennyzhang/cheatsheet-kubernetes-A4/blob/master/skip-tls-verify.md">skip-tls-verify.md</a></td>
</tr>
<tr>
<td><a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">Ubuntu install kubectl</a></td>
<td>=”deb https://apt.kubernetes.io/ kubernetes-xenial main”=</td>
</tr>
<tr>
<td>Reference</td>
<td><a href="https://github.com/kubernetes/kubernetes/tags">GitHub: kubernetes releases</a></td>
</tr>
<tr>
<td>Reference</td>
<td><a href="https://cheatsheet.dennyzhang.com/cheatsheet-minikube-A4">minikube cheatsheet</a>, <a href="https://cheatsheet.dennyzhang.com/cheatsheet-docker-A4">docker cheatsheet</a>, <a href="https://cheatsheet.dennyzhang.com/cheatsheet-openshift-A4">OpenShift CheatSheet</a></td>
</tr>
</tbody>
</table>
<h2 id="12-check-performance">1.2 Check Performance</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>Get node resource usage</td>
<td><code>kubectl top node</code></td>
</tr>
<tr>
<td>Get pod resource usage</td>
<td><code>kubectl top pod</code></td>
</tr>
<tr>
<td>Get resource usage for a given pod</td>
<td><code>kubectl top &lt;podname&gt; --containers</code></td>
</tr>
<tr>
<td>List resource utilization for all containers</td>
<td><code>kubectl top pod --all-namespaces --containers=true</code></td>
</tr>
</tbody>
</table>
<h2 id="13-resources-deletion">1.3 Resources Deletion</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>Delete pod</td>
<td><code>kubectl delete pod/&lt;pod-name&gt; -n &lt;my-namespace&gt;</code></td>
</tr>
<tr>
<td>Delete pod by force</td>
<td><code>kubectl delete pod/&lt;pod-name&gt; --grace-period=0 --force</code></td>
</tr>
<tr>
<td>Delete pods by labels</td>
<td><code>kubectl delete pod -l env=test</code></td>
</tr>
<tr>
<td>Delete deployments by labels</td>
<td><code>kubectl delete deployment -l app=wordpress</code></td>
</tr>
<tr>
<td>Delete all resources filtered by labels</td>
<td><code>kubectl delete pods,services -l name=myLabel</code></td>
</tr>
<tr>
<td>Delete resources under a namespace</td>
<td><code>kubectl -n my-ns delete po,svc --all</code></td>
</tr>
<tr>
<td>Delete persist volumes by labels</td>
<td><code>kubectl delete pvc -l app=wordpress</code></td>
</tr>
<tr>
<td>Delete state fulset only (not pods)</td>
<td><code>kubectl delete sts/&lt;stateful_set_name&gt; --cascade=false</code></td>
</tr>
</tbody>
</table>
<h2 id="14-log-conf-files">1.4 Log &amp; Conf Files</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>Config folder</td>
<td><code>/etc/kubernetes/</code></td>
</tr>
<tr>
<td>Certificate files</td>
<td><code>/etc/kubernetes/pki/</code></td>
</tr>
<tr>
<td>Credentials to API server</td>
<td><code>/etc/kubernetes/kubelet.conf</code></td>
</tr>
<tr>
<td>Superuser credentials</td>
<td><code>/etc/kubernetes/admin.conf</code></td>
</tr>
<tr>
<td>kubectl config file</td>
<td><code>~/.kube/config</code></td>
</tr>
<tr>
<td>Kubernets working dir</td>
<td><code>/var/lib/kubelet/</code></td>
</tr>
<tr>
<td>Docker working dir</td>
<td><code>/var/lib/docker/</code>, <code>/var/log/containers/</code></td>
</tr>
<tr>
<td>Etcd working dir</td>
<td><code>/var/lib/etcd/</code></td>
</tr>
<tr>
<td>Network cni</td>
<td><code>/etc/cni/net.d/</code></td>
</tr>
<tr>
<td>Log files</td>
<td><code>/var/log/pods/</code></td>
</tr>
<tr>
<td>log in worker node</td>
<td><code>/var/log/kubelet.log</code>, <code>/var/log/kube-proxy.log</code></td>
</tr>
<tr>
<td>log in master node</td>
<td><code>kube-apiserver.log</code>, <code>kube-scheduler.log</code>, <code>kube-controller-manager.log</code></td>
</tr>
<tr>
<td>Env</td>
<td><code>/etc/systemd/system/kubelet.service.d/10-kubeadm.conf</code></td>
</tr>
<tr>
<td>Env</td>
<td>export KUBECONFIG=/etc/kubernetes/admin.conf</td>
</tr>
</tbody>
</table>
<h2 id="15-pod">1.5 Pod</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>List all pods</td>
<td><code>kubectl get pods</code></td>
</tr>
<tr>
<td>List pods for all namespace</td>
<td><code>kubectl get pods -all-namespaces</code></td>
</tr>
<tr>
<td>List all critical pods</td>
<td><code>kubectl get -n kube-system pods -a</code></td>
</tr>
<tr>
<td>List pods with more info</td>
<td><code>kubectl get pod -o wide</code>, <code>kubectl get pod/&lt;pod-name&gt; -o yaml</code></td>
</tr>
<tr>
<td>Get pod info</td>
<td><code>kubectl describe pod/srv-mysql-server</code></td>
</tr>
<tr>
<td>List all pods with labels</td>
<td><code>kubectl get pods --show-labels</code></td>
</tr>
<tr>
<td><a href="https://github.com/kubernetes/kubernetes/issues/49387">List all unhealthy pods</a></td>
<td>kubectl get pods –field-selector=status.phase!=Running –all-namespaces</td>
</tr>
<tr>
<td>List running pods</td>
<td>kubectl get pods –field-selector=status.phase=Running</td>
</tr>
<tr>
<td>Get Pod initContainer status</td>
<td><code>kubectl get pod --template '{{.status.initContainerStatuses}}' &lt;pod-name&gt;</code></td>
</tr>
<tr>
<td>kubectl run command</td>
<td>kubectl exec -it -n “<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>s</mi><mi mathvariant="normal">”</mi><mi mathvariant="normal">“</mi></mrow><annotation encoding="application/x-tex">ns” “</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault">s</span><span class="mord">”</span><span class="mord">“</span></span></span></span>podname” – sh -c “echo $msg &gt;&gt;/dev/err.log”</td>
</tr>
<tr>
<td>Watch pods</td>
<td><code>kubectl get pods -n wordpress --watch</code></td>
</tr>
<tr>
<td>Get pod by selector</td>
<td>kubectl get pods –selector=”app=syslog” -o jsonpath=’{.items[*].metadata.name}’</td>
</tr>
<tr>
<td>List pods and images</td>
<td>kubectl get pods -o=’custom-columns=PODS:.metadata.name,Images:.spec.containers[*].image’</td>
</tr>
<tr>
<td>List pods and containers</td>
<td>-o=’custom-columns=PODS:.metadata.name,CONTAINERS:.spec.containers[*].name’</td>
</tr>
<tr>
<td>Reference</td>
<td><a href="https://cheatsheet.dennyzhang.com/kubernetes-yaml-templates">Link: kubernetes yaml templates</a></td>
</tr>
</tbody>
</table>
<h2 id="16-label-annontation">1.6 Label &amp; Annontation</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>Filter pods by label</td>
<td><code>kubectl get pods -l owner=denny</code></td>
</tr>
<tr>
<td>Manually add label to a pod</td>
<td><code>kubectl label pods dummy-input owner=denny</code></td>
</tr>
<tr>
<td>Remove label</td>
<td><code>kubectl label pods dummy-input owner-</code></td>
</tr>
<tr>
<td>Manually add annonation to a pod</td>
<td><code>kubectl annotate pods dummy-input my-url=https://dennyzhang.com</code></td>
</tr>
</tbody>
</table>
<h2 id="17-deployment-scale">1.7 Deployment &amp; Scale</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>Scale out</td>
<td><code>kubectl scale --replicas=3 deployment/nginx-app</code></td>
</tr>
<tr>
<td>online rolling upgrade</td>
<td><code>kubectl rollout app-v1 app-v2 --image=img:v2</code></td>
</tr>
<tr>
<td>Roll backup</td>
<td><code>kubectl rollout app-v1 app-v2 --rollback</code></td>
</tr>
<tr>
<td>List rollout</td>
<td><code>kubectl get rs</code></td>
</tr>
<tr>
<td>Check update status</td>
<td><code>kubectl rollout status deployment/nginx-app</code></td>
</tr>
<tr>
<td>Check update history</td>
<td><code>kubectl rollout history deployment/nginx-app</code></td>
</tr>
<tr>
<td>Pause/Resume</td>
<td><code>kubectl rollout pause deployment/nginx-deployment</code>, <code>resume</code></td>
</tr>
<tr>
<td>Rollback to previous version</td>
<td><code>kubectl rollout undo deployment/nginx-deployment</code></td>
</tr>
<tr>
<td>Reference</td>
<td><a href="https://cheatsheet.dennyzhang.com/kubernetes-yaml-templates">Link: kubernetes yaml templates</a>, <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#pausing-and-resuming-a-deployment">Link: Pausing and Resuming a Deployment</a></td>
</tr>
</tbody>
</table>
<h2 id="18-quota-limits-resource">1.8 Quota &amp; Limits &amp; Resource</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>List Resource Quota</td>
<td><code>kubectl get resourcequota</code></td>
</tr>
<tr>
<td>List Limit Range</td>
<td><code>kubectl get limitrange</code></td>
</tr>
<tr>
<td>Customize resource definition</td>
<td><code>kubectl set resources deployment nginx -c=nginx --limits=cpu=200m</code></td>
</tr>
<tr>
<td>Customize resource definition</td>
<td><code>kubectl set resources deployment nginx -c=nginx --limits=memory=512Mi</code></td>
</tr>
<tr>
<td>Reference</td>
<td><a href="https://cheatsheet.dennyzhang.com/kubernetes-yaml-templates">Link: kubernetes yaml templates</a></td>
</tr>
</tbody>
</table>
<h2 id="19-service">1.9 Service</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>List all services</td>
<td><code>kubectl get services</code></td>
</tr>
<tr>
<td>List service endpoints</td>
<td><code>kubectl get endpoints</code></td>
</tr>
<tr>
<td>Get service detail</td>
<td><code>kubectl get service nginx-service -o yaml</code></td>
</tr>
<tr>
<td>Get service cluster ip</td>
<td>kubectl get service nginx-service -o go-template=’{{.spec.clusterIP}}’</td>
</tr>
<tr>
<td>Get service cluster port</td>
<td>kubectl get service nginx-service -o go-template=’{{(index .spec.ports 0).port}}’</td>
</tr>
<tr>
<td>Expose deployment as lb service</td>
<td><code>kubectl expose deployment/my-app --type=LoadBalancer --name=my-service</code></td>
</tr>
<tr>
<td>Expose service as lb service</td>
<td><code>kubectl expose service/wordpress-1-svc --type=LoadBalancer --name=ns1</code></td>
</tr>
<tr>
<td>Reference</td>
<td><a href="https://cheatsheet.dennyzhang.com/kubernetes-yaml-templates">Link: kubernetes yaml templates</a></td>
</tr>
</tbody>
</table>
<h2 id="110-secrets">1.10 Secrets</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>List secrets</td>
<td><code>kubectl get secrets --all-namespaces</code></td>
</tr>
<tr>
<td>Generate secret</td>
<td><code>echo -n 'mypasswd'=, then redirect to =base64 --decode</code></td>
</tr>
<tr>
<td>Get secret</td>
<td><code>kubectl get secret denny-cluster-kubeconfig</code></td>
</tr>
<tr>
<td>Get a specific field of a secret</td>
<td>kubectl get secret denny-cluster-kubeconfig -o jsonpath=”{.data.value}”</td>
</tr>
<tr>
<td>Create secret from cfg file</td>
<td>kubectl create secret generic db-user-pass –from-file=./username.txt</td>
</tr>
<tr>
<td>Reference</td>
<td><a href="https://cheatsheet.dennyzhang.com/kubernetes-yaml-templates">Link: kubernetes yaml templates</a>, <a href="https://kubernetes.io/docs/concepts/configuration/secret/">Link: Secrets</a></td>
</tr>
</tbody>
</table>
<h2 id="111-statefulset">1.11 StatefulSet</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>List statefulset</td>
<td><code>kubectl get sts</code></td>
</tr>
<tr>
<td>Delete statefulset only (not pods)</td>
<td><code>kubectl delete sts/&lt;stateful_set_name&gt; --cascade=false</code></td>
</tr>
<tr>
<td>Scale statefulset</td>
<td><code>kubectl scale sts/&lt;stateful_set_name&gt; --replicas=5</code></td>
</tr>
<tr>
<td>Reference</td>
<td><a href="https://cheatsheet.dennyzhang.com/kubernetes-yaml-templates">Link: kubernetes yaml templates</a></td>
</tr>
</tbody>
</table>
<h2 id="112-volumes-volume-claims">1.12 Volumes &amp; Volume Claims</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>List storage class</td>
<td><code>kubectl get storageclass</code></td>
</tr>
<tr>
<td>Check the mounted volumes</td>
<td><code>kubectl exec storage ls /data</code></td>
</tr>
<tr>
<td>Check persist volume</td>
<td><code>kubectl describe pv/pv0001</code></td>
</tr>
<tr>
<td>Copy local file to pod</td>
<td><code>kubectl cp /tmp/my &lt;some-namespace&gt;/&lt;some-pod&gt;:/tmp/server</code></td>
</tr>
<tr>
<td>Copy pod file to local</td>
<td><code>kubectl cp &lt;some-namespace&gt;/&lt;some-pod&gt;:/tmp/server /tmp/my</code></td>
</tr>
<tr>
<td>Reference</td>
<td><a href="https://cheatsheet.dennyzhang.com/kubernetes-yaml-templates">Link: kubernetes yaml templates</a></td>
</tr>
</tbody>
</table>
<h2 id="113-events-metrics">1.13 Events &amp; Metrics</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>View all events</td>
<td><code>kubectl get events --all-namespaces</code></td>
</tr>
<tr>
<td>List Events sorted by timestamp</td>
<td>kubectl get events –sort-by=.metadata.creationTimestamp</td>
</tr>
</tbody>
</table>
<h2 id="114-node-maintenance">1.14 Node Maintenance</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mark node as unschedulable</td>
<td><code>kubectl cordon $NDOE_NAME</code></td>
</tr>
<tr>
<td>Mark node as schedulable</td>
<td><code>kubectl uncordon $NDOE_NAME</code></td>
</tr>
<tr>
<td>Drain node in preparation for maintenance</td>
<td><code>kubectl drain $NODE_NAME</code></td>
</tr>
</tbody>
</table>
<h2 id="115-namespace-security">1.15 Namespace &amp; Security</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>List authenticated contexts</td>
<td><code>kubectl config get-contexts</code>, <code>~/.kube/config</code></td>
</tr>
<tr>
<td>Set namespace preference</td>
<td><code>kubectl config set-context &lt;context_name&gt; --namespace=&lt;ns_name&gt;</code></td>
</tr>
<tr>
<td>Load context from config file</td>
<td><code>kubectl get cs --kubeconfig kube_config.yml</code></td>
</tr>
<tr>
<td>Switch context</td>
<td><code>kubectl config use-context &lt;cluster-name&gt;</code></td>
</tr>
<tr>
<td>Delete the specified context</td>
<td><code>kubectl config delete-context &lt;cluster-name&gt;</code></td>
</tr>
<tr>
<td>List all namespaces defined</td>
<td><code>kubectl get namespaces</code></td>
</tr>
<tr>
<td>List certificates</td>
<td><code>kubectl get csr</code></td>
</tr>
<tr>
<td>Reference</td>
<td><a href="https://cheatsheet.dennyzhang.com/kubernetes-yaml-templates">Link: kubernetes yaml templates</a></td>
</tr>
</tbody>
</table>
<h2 id="116-network">1.16 Network</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>Temporarily add a port-forwarding</td>
<td><code>kubectl port-forward redis-134 6379:6379</code></td>
</tr>
<tr>
<td>Add port-forwaring for deployment</td>
<td><code>kubectl port-forward deployment/redis-master 6379:6379</code></td>
</tr>
<tr>
<td>Add port-forwaring for replicaset</td>
<td><code>kubectl port-forward rs/redis-master 6379:6379</code></td>
</tr>
<tr>
<td>Add port-forwaring for service</td>
<td><code>kubectl port-forward svc/redis-master 6379:6379</code></td>
</tr>
<tr>
<td>Get network policy</td>
<td><code>kubectl get NetworkPolicy</code></td>
</tr>
</tbody>
</table>
<h2 id="117-patch">1.17 Patch</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Summary</th>
</tr>
</thead>
<tbody>
<tr>
<td>Patch service to loadbalancer</td>
<td>=kubectl patch svc $svc_name -p ‘{“spec”: {“type”: “LoadBalancer”}}’=</td>
</tr>
</tbody>
</table>
<h2 id="118-extenstions">1.18 Extenstions</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Summary</th>
</tr>
</thead>
<tbody>
<tr>
<td>List api group</td>
<td><code>kubectl api-versions</code></td>
</tr>
<tr>
<td>List all CRD</td>
<td><code>kubectl get crd</code></td>
</tr>
<tr>
<td>List storageclass</td>
<td><code>kubectl get storageclass</code></td>
</tr>
<tr>
<td>List all supported resources</td>
<td><code>kubectl api-resources</code></td>
</tr>
</tbody>
</table>
<h3 id="1191-services-on-master-nodes">1.19.1 Services on Master Nodes</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Summary</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/kubernetes/kubernetes/tree/master/cmd/kube-apiserver">kube-apiserver</a></td>
<td>exposes the Kubernetes API from master nodes</td>
</tr>
<tr>
<td><a href="https://coreos.com/etcd/">etcd</a></td>
<td>reliable data store for all k8s cluster data</td>
</tr>
<tr>
<td><a href="https://github.com/kubernetes/kubernetes/tree/master/cmd/kube-scheduler">kube-scheduler</a></td>
<td>schedule pods to run on selected nodes</td>
</tr>
<tr>
<td><a href="https://github.com/kubernetes/kubernetes/tree/master/cmd/kube-controller-manager">kube-controller-manager</a></td>
<td>node controller, replication controller, endpoints controller, and service account &amp; token controllers</td>
</tr>
</tbody>
</table>
<h3 id="1192-services-on-worker-nodes">1.19.2 Services on Worker Nodes</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Summary</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/kubernetes/kubernetes/tree/master/cmd/kubelet">kubelet</a></td>
<td>makes sure that containers are running in a pod</td>
</tr>
<tr>
<td><a href="https://github.com/kubernetes/kubernetes/tree/master/cmd/kube-proxy">kube-proxy</a></td>
<td>perform connection forwarding</td>
</tr>
<tr>
<td><a href="https://github.com/docker/engine">Container Runtime</a></td>
<td>Kubernetes supported runtimes: Docker, rkt, runc and any <a href="https://github.com/opencontainers/runtime-spec">OCI runtime-spec</a> implementation.</td>
</tr>
</tbody>
</table>
<h3 id="1193-addons-pods-and-services-that-implement-cluster-features">1.19.3 Addons: pods and services that implement cluster features</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Summary</th>
</tr>
</thead>
<tbody>
<tr>
<td>DNS</td>
<td>serves DNS records for Kubernetes services</td>
</tr>
<tr>
<td>Web UI</td>
<td>a general purpose, web-based UI for Kubernetes clusters</td>
</tr>
<tr>
<td>Container Resource Monitoring</td>
<td>collect, store and serve container metrics</td>
</tr>
<tr>
<td>Cluster-level Logging</td>
<td>save container logs to a central log store with search/browsing interface</td>
</tr>
</tbody>
</table>
<h3 id="1194-tools">1.19.4 Tools</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Summary</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/kubernetes/kubernetes/tree/master/cmd/kubectl">kubectl</a></td>
<td>the command line util to talk to k8s cluster</td>
</tr>
<tr>
<td><a href="https://github.com/kubernetes/kubernetes/tree/master/cmd/kubeadm">kubeadm</a></td>
<td>the command to bootstrap the cluster</td>
</tr>
<tr>
<td><a href="https://kubernetes.io/docs/reference/setup-tools/kubefed/kubefed/">kubefed</a></td>
<td>the command line to control a Kubernetes Cluster Federation</td>
</tr>
<tr>
<td>Kubernetes Components</td>
<td><a href="https://kubernetes.io/docs/concepts/overview/components/">Link: Kubernetes Components</a></td>
</tr>
</tbody>
</table>
<h2 id="120-more-resources">1.20 More Resources</h2>
<p>https://kubernetes.io/docs/reference/kubectl/cheatsheet/</p>
<p>https://codefresh.io/kubernetes-guides/kubernetes-cheat-sheet/</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#11-common-commands">1.1 Common Commands</a></li>
<li><a href="#12-check-performance">1.2 Check Performance</a></li>
<li><a href="#13-resources-deletion">1.3 Resources Deletion</a></li>
<li><a href="#14-log-conf-files">1.4 Log &amp; Conf Files</a></li>
<li><a href="#15-pod">1.5 Pod</a></li>
<li><a href="#16-label-annontation">1.6 Label &amp; Annontation</a></li>
<li><a href="#17-deployment-scale">1.7 Deployment &amp; Scale</a></li>
<li><a href="#18-quota-limits-resource">1.8 Quota &amp; Limits &amp; Resource</a></li>
<li><a href="#19-service">1.9 Service</a></li>
<li><a href="#110-secrets">1.10 Secrets</a></li>
<li><a href="#111-statefulset">1.11 StatefulSet</a></li>
<li><a href="#112-volumes-volume-claims">1.12 Volumes &amp; Volume Claims</a></li>
<li><a href="#113-events-metrics">1.13 Events &amp; Metrics</a></li>
<li><a href="#114-node-maintenance">1.14 Node Maintenance</a></li>
<li><a href="#115-namespace-security">1.15 Namespace &amp; Security</a></li>
<li><a href="#116-network">1.16 Network</a></li>
<li><a href="#117-patch">1.17 Patch</a></li>
<li><a href="#118-extenstions">1.18 Extenstions</a>
<ul>
<li><a href="#1191-services-on-master-nodes">1.19.1 Services on Master Nodes</a></li>
<li><a href="#1192-services-on-worker-nodes">1.19.2 Services on Worker Nodes</a></li>
<li><a href="#1193-addons-pods-and-services-that-implement-cluster-features">1.19.3 Addons: pods and services that implement cluster features</a></li>
<li><a href="#1194-tools">1.19.4 Tools</a></li>
</ul>
</li>
<li><a href="#120-more-resources">1.20 More Resources</a></li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://www.luoboyu.com/post/hello-gridea">
              <h3 class="post-title">
                Minikube 使用
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/wchaowu" target="_blank">wchaowu#gmail.com</a> | 
  <a class="rss" href="https://www.luoboyu.com/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()

  let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

  // This should probably be throttled.
  // Especially because it triggers during smooth scrolling.
  // https://lodash.com/docs/4.17.10#throttle
  // You could do like...
  // window.addEventListener("scroll", () => {
  //    _.throttle(doThatStuff, 100);
  // });
  // Only not doing it here to keep this Pen dependency-free.

  window.addEventListener("scroll", event => {
    let fromTop = window.scrollY;

    mainNavLinks.forEach((link, index) => {
      let section = document.getElementById(decodeURI(link.hash).substring(1));
      let nextSection = null
      if (mainNavLinks[index + 1]) {
        nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
      }
      if (section.offsetTop <= fromTop) {
        if (nextSection) {
          if (nextSection.offsetTop > fromTop) {
            link.classList.add("current");
          } else {
            link.classList.remove("current");    
          }
        } else {
          link.classList.add("current");
        }
      } else {
        link.classList.remove("current");
      }
    });
  });

</script>

      </div>
    </div>
  </body>
</html>
